<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta name="description" content="" />
  <meta name="author" content="" />
  <title>Gautrain Bus Service Operational Dashboard</title>
  <!-- loader-->
  <link href="assets/css/pace.min.css" rel="stylesheet" />
  <script src="assets/js/pace.min.js"></script>
  <!--favicon-->
  <link rel="icon" href="assets/images/favicon_io/favicon-16x16.png" type="image/x-icon">
  <!-- Vector CSS -->
  <link href="assets/plugins/vectormap/jquery-jvectormap-2.0.2.css" rel="stylesheet" />
  <!-- simplebar CSS-->
  <link href="assets/plugins/simplebar/css/simplebar.css" rel="stylesheet" />
  <!-- Bootstrap core CSS-->
  <link href="assets/css/bootstrap.min.css" rel="stylesheet" />
  <!-- animate CSS-->
  <link href="assets/css/animate.css" rel="stylesheet" type="text/css" />
  <!-- Icons CSS-->
  <link href="assets/css/icons.css" rel="stylesheet" type="text/css" />
  <!-- Sidebar CSS-->
  <link href="assets/css/sidebar-menu.css" rel="stylesheet" />
  <!-- Custom Style-->
  <link href="assets/css/app-style.css" rel="stylesheet" />
  <!--Leaflet CSS and JS-->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css"
    integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ=="
    crossorigin="" />
  <!-- Make sure you put this AFTER Leaflet's CSS -->
  <script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js"
    integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ=="
    crossorigin=""></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

</head>

<body class="bg-theme bg-theme1">

  <!--Start topbar header-->
  <header class="topbar-nav">
    <nav class="navbar navbar-expand fixed-top">
      <div class="brand-logo">
        <a href="index.html">
          <img src="assets/images/gautrain-logo.png" class="logo-icon" alt="logo icon">
          <h5 class="logo-text">Gautrain Bus Service Operational Dashboard</h5>
        </a>
      </div>
    </nav>
  </header>
  <!--End topbar header-->

  <div class="clearfix"></div>

  <div class="content-wrapper">
    <div class="container-fluid">

      <!--Start Dashboard Content-->

      <!--Start Row 1-->
      <div class="row">
        <div class="col-12 col-lg-6 col-xl-6">
          <div class="card">
            <div class="card-header">Real-Time Bus Locations (Quadtree Indexing Map Place holder)</div>
            <div class="card-body">
              <div id="map" class="map-chart-container">
                <script>
                  // initialize the map
                  var map = L.map('map').setView([-26.0415, 28.1195], 15);

                  // load a tile layer
                  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    maxZoom: 19,
                    attribution: '© OpenStreetMap'
                  }).addTo(map);

                  var theIcon = L.icon({
                    iconUrl: "bus-icon-13002.jpg",
                    //shadowUrl: "images/marker-shadow.png",
                    iconSize: [15, 15]
                  })

                  function onEachFeature(feature, layer) {
                    // does this feature have a property named popupContent?
                    if (feature.properties && feature.properties.busId) {
                      layer.bindTooltip("Bus ID: " + feature.properties.busId);
                    }
                  }

                  var boundlines = [
                    {
                      "type": "FeatureCollection",
                      "features": [
                        {
                          "type": "Feature",
                          "properties": {},
                          "geometry": {
                            "type": "LineString",
                            "coordinates": [
                              [
                                28.116,
                                -26.034
                              ],
                              [
                                28.123,
                                -26.034
                              ],
                              [
                                28.123,
                                -26.049
                              ],
                              [
                                28.116,
                                -26.049
                              ],
                              [
                                28.116,
                                -26.034
                              ]
                            ]
                          }
                        }
                      ]
                    }
                  ];

                  var layer = L.geoJSON(boundlines, {
                    pointToLayer: function (feature, latlng) {
                      return L.marker(latlng, { icon: theIcon });
                    }
                  })

                  layer.bindTooltip(function (layer) {
                    return "Bus ID: " + layer.feature.properties.busId + '<br> y = ' + layer.feature.geometry.coordinates[1] + '<br> x = ' + layer.feature.geometry.coordinates[0] + '<br> GPS Last updated Date: ' + layer.feature.properties.GPSLastupdatedDate + '<br> GPS Last updated Time: ' + layer.feature.properties.GPSLastupdatedTime + '<br> TimeStamp: ' + layer.feature.properties.Timestamp;
                  }).addTo(map)

                  $(function () {
                    function update() {
                      map.removeLayer(layer)
                      $.getJSON("index.geojson").done(function (data) {
                        console.log(data);
                        layer.addData(data)
                        map.addLayer(layer)
                      })
                    }
                    setInterval(update, 10000),
                      update();
                  });
                </script>
              </div>
            </div>
          </div>
        </div>

        <div class="col-12 col-lg-6 col-xl-6">
          <div class="card">
            <div class="card-header">GPS Coordinate Delays (BAR CHART)</div>
            <!--div class="card-body"></div-->
            <div class="table-responsive">
              <table class="table align-items-center">
                <tbody>
                  <tr>
                    <th>Bus ID</th>
                    <th>latitude</th>
                    <th>longitude</th>
                  </tr>
                  <tr>
                    <td>33032</td>
                    <td>-26.039373</td>
                    <td>28.119843</td>
                  </tr>
                  <tr>
                    <td>33027</td>
                    <td>-26.039157</td>
                    <td>28.119582</td>
                  </tr>
                  <tr>
                    <td>33004</td>
                    <td>-26.039155</td>
                    <td>28.119793</td>
                  </tr>
                  <tr>
                    <td>33004</td>
                    <td>-26.039155</td>
                    <td>28.119793</td>
                  </tr>
                  <tr>
                    <td>33004</td>
                    <td>-26.039155</td>
                    <td>28.119793</td>
                  </tr>
                  <tr>
                    <td>33004</td>
                    <td>-26.039155</td>
                    <td>28.119793</td>
                  </tr>
                  <tr>
                    <td>33004</td>
                    <td>-26.039155</td>
                    <td>28.119793</td>
                  </tr><tr>
                    <td>33004</td>
                    <td>-26.039155</td>
                    <td>28.119793</td>
                  </tr>

                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
      <!--End Row 1-->


      <!--Start Row 2-->
      <div class="row">
        <div class="col-12 col-lg-6 col-xl-6">
          <div class="card">
            <div class="card-header">Static Map (List Indexing Map Place holder)</div>
            <div class="card-body">
              <div id="map2" class="map-chart-container">
                <script>
                  // initialize the map
                  var map2 = L.map('map2').setView([-26.0415, 28.1195], 15);

                  // load a tile layer
                  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    maxZoom: 19,
                    attribution: '© OpenStreetMap'
                  }).addTo(map2);

                  var boundlines2 = [
                    {
                      "type": "FeatureCollection",
                      "features": [
                        {
                          "type": "Feature",
                          "properties": {},
                          "geometry": {
                            "type": "LineString",
                            "coordinates": [
                              [
                                28.116,
                                -26.034
                              ],
                              [
                                28.123,
                                -26.034
                              ],
                              [
                                28.123,
                                -26.049
                              ],
                              [
                                28.116,
                                -26.049
                              ],
                              [
                                28.116,
                                -26.034
                              ]
                            ]
                          }
                        }
                      ]
                    }
                  ];

                  var layer2 = L.geoJSON(boundlines2, {
                    pointToLayer: function (feature, latlng) {
                      return L.marker(latlng, { icon: theIcon });
                    }
                  })
                </script>
              </div>
            </div>
          </div>
        </div>

        <div class="col-12 col-lg-6 col-xl-6">
          <div class="card">
            <div class="card-header">API Call Response Time (PIE/GAUGE/VALUE CARD)</div>
            <!--div class="card-body"></div-->
            <div class="table-responsive">
              <table class="table align-items-center">
                <tbody>
                  <tr>
                    <th>Call TimeStamp</th>
                    <th>Response Time (s)</th>
                  </tr>
                  <tr>
                    <td>2022-07-25 23:25:27</td>
                    <td>4.0</td>
                  </tr>
                  <tr>
                    <td>2022-07-25 23:25:37</td>
                    <td>5.0</td>
                  </tr>
                  <tr>
                    <td>2022-07-25 23:25:47</td>
                    <td>11.0</td>
                  </tr>
                  <tr>
                    <td>2022-07-25 23:25:47</td>
                    <td>11.0</td>
                  </tr>
                  <tr>
                    <td>2022-07-25 23:25:47</td>
                    <td>11.0</td>
                  </tr>
                  <tr>
                    <td>2022-07-25 23:25:47</td>
                    <td>11.0</td>
                  </tr>
                  <tr>
                    <td>2022-07-25 23:25:47</td>
                    <td>11.0</td>
                  </tr>
                  <tr>
                    <td>2022-07-25 23:25:47</td>
                    <td>11.0</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    <!--End Row 2-->

    <div class="row">
      <div class="col-12 col-lg-12">
        <div class="card">
          <div class="card-header">Recent Order Tables</div>
          <div class="table-responsive">
            <table id="geojsoncontent" class="table align-items-center table-flush table-borderless"></table>
          </div>
        </div>
      </div>
    </div>
    <!--End Row-->

    <!--End Dashboard Content-->

    <!--start overlay-->
    <div class="overlay toggle-menu"></div>
    <!--end overlay-->

  </div>
  <!-- End container-fluid-->

  </div>
  <!--End content-wrapper-->
  <!--Start Back To Top Button-->
  <a href="javaScript:void();" class="back-to-top"><i class="fa fa-angle-double-up"></i> </a>
  <!--End Back To Top Button-->

  <!--Start footer-->
  <footer class="footer">
    <div class="container">
      <div class="text-center">
        Copyright © 2022 Moloko Mahlogonolo Mokubedi
      </div>
    </div>
  </footer>
  <!--End footer-->

  </div>
  <!--End wrapper-->

  <!-- Bootstrap core JavaScript-->
  <script src="assets/js/jquery.min.js"></script>
  <script src="assets/js/popper.min.js"></script>
  <script src="assets/js/bootstrap.min.js"></script>

  <!-- simplebar js -->
  <script src="assets/plugins/simplebar/js/simplebar.js"></script>
  <!-- sidebar-menu js -->
  <script src="assets/js/sidebar-menu.js"></script>
  <!-- loader scripts -->
  <script src="assets/js/jquery.loading-indicator.js"></script>
  <!-- Custom scripts -->
  <script src="assets/js/app-script.js"></script>
  <!-- Chart js -->
  <script src="assets/plugins/Chart.js/Chart.min.js"></script>

  <!-- Index js -->
  <script src="assets/js/index.js"></script>

  <!--data table-->
  <script src="assets/js/geoJSONToTable.js"></script>


</body>

</html>